<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aptitude Prep Toolkit with Gemini AI (Dark Mode)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Chosen Palette: Dark Mode Neutrals -->
    <!-- Application Structure Plan: The SPA is designed as an interactive toolkit with a tabbed/navigated interface for four main sections: 'Company Deep Dive', 'Aptitude Arsenal', 'Specialized Skills', and 'Study Plan'. This task-oriented structure was chosen over a linear report layout because students preparing for placements need to quickly access specific information (e.g., a single company's pattern or a specific topic's tricks) rather than reading sequentially. This design facilitates targeted learning and quick reference, improving usability. -->
    <!-- Visualization & Content Choices: 1. Company Patterns (Goal: Compare): Presented via interactive buttons that dynamically update a content area and a Chart.js donut chart showing time distribution per section. This provides focused, at-a-glance comparison. 2. Aptitude Tricks (Goal: Organize/Inform): A nested accordion using HTML/JS to break down dense information by skill and topic, preventing overload. 3. Study Plan (Goal: Organize): A simple accordion to present the 4-week plan in a digestible, step-by-step format. All diagrams and icons are built with HTML/CSS/Unicode to avoid SVG/images. Library: Chart.js (Canvas). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      .accordion-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
      }
      .active-nav {
        color: #60a5fa;
        border-bottom-color: #60a5fa;
      }
      .inactive-nav {
        border-bottom-color: transparent;
      }
      .company-btn-active {
        background-color: #2563eb;
        color: white;
      }
      .chart-container {
        position: relative;
        width: 100%;
        max-width: 400px;
        margin-left: auto;
        margin-right: auto;
        height: 300px;
        max-height: 350px;
      }
      @media (min-width: 768px) {
        .chart-container {
          height: 350px;
        }
      }
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 50;
        opacity: 0;
        visibility: hidden;
        transition:
          opacity 0.3s,
          visibility 0.3s;
      }
      .modal-overlay.visible {
        opacity: 1;
        visibility: visible;
      }
      .modal-content {
        background: #1f2937;
        padding: 2rem;
        border-radius: 0.75rem;
        max-width: 90%;
        width: 600px;
        max-height: 80vh;
        overflow-y: auto;
      }
      .loader {
        border: 4px solid #4b5563;
        border-top: 4px solid #3b82f6;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body class="bg-gray-900 text-gray-300">
    <div id="app" class="container mx-auto p-4 md:p-8">
      <header class="text-center mb-8">
        <h1 class="text-3xl md:text-4xl font-bold text-white">
          The Mass Recruiter Aptitude Blueprint
        </h1>
        <p class="text-lg text-gray-400 mt-2">
          Your AI-powered interactive guide to ace the placement season.
        </p>
      </header>

      <nav class="mb-8 border-b border-gray-700">
        <ul
          class="flex flex-wrap justify-center -mb-px text-sm font-medium text-center"
        >
          <li class="mr-2">
            <button
              class="nav-link inline-block p-4 border-b-2 rounded-t-lg transition-colors duration-300"
              data-view="companies"
            >
              üè¢ Company Deep Dive
            </button>
          </li>
          <li class="mr-2">
            <button
              class="nav-link inline-block p-4 border-b-2 rounded-t-lg transition-colors duration-300"
              data-view="arsenal"
            >
              üéØ Aptitude Arsenal
            </button>
          </li>
          <li class="mr-2">
            <button
              class="nav-link inline-block p-4 border-b-2 rounded-t-lg transition-colors duration-300"
              data-view="special"
            >
              ‚ú® Specialized Skills
            </button>
          </li>
          <li>
            <button
              class="nav-link inline-block p-4 border-b-2 rounded-t-lg transition-colors duration-300"
              data-view="plan"
            >
              üóìÔ∏è AI Study Plan
            </button>
          </li>
        </ul>
      </nav>

      <main id="main-content"></main>
    </div>

    <div id="modal" class="modal-overlay">
      <div class="modal-content">
        <div class="flex justify-between items-center mb-4">
          <h3 id="modal-title" class="text-xl font-bold text-white"></h3>
          <button id="modal-close" class="text-gray-400 hover:text-white">
            &times;
          </button>
        </div>
        <div id="modal-body"></div>
      </div>
    </div>

    <div id="global-loader" class="modal-overlay">
      <div class="loader"></div>
    </div>

    <script>
      const appData = {
        companies: {
          tcs: {
            name: "TCS",
            assessmentName: "NQT (Foundation + Advanced)",
            totalDuration: 190,
            negativeMarking: "No",
            sections: [
              {
                name: "Foundation: Numerical Ability",
                questions: 20,
                duration: 25,
              },
              {
                name: "Foundation: Verbal Ability",
                questions: 25,
                duration: 25,
              },
              {
                name: "Foundation: Reasoning Ability",
                questions: 20,
                duration: 25,
              },
              {
                name: "Advanced: Quant & Reasoning",
                questions: 15,
                duration: 25,
              },
              { name: "Advanced: Coding", questions: 3, duration: 90 },
            ],
            strategy:
              "The test environment is extremely strict with a 'no revisit' policy for questions, demanding high concentration. The Foundation section is a gateway, but the Advanced section is crucial for top roles. Time management within each section's fixed timer is key.",
          },
          accenture: {
            name: "Accenture",
            assessmentName: "Cognitive & Technical, Coding, Communication",
            totalDuration: "~155-160",
            negativeMarking: "No",
            sections: [
              { name: "Cognitive & Technical", questions: 90, duration: 90 },
              { name: "Coding", questions: 2, duration: 45 },
              { name: "Communication", questions: 0, duration: 25 },
            ],
            strategy:
              "A multi-stage gauntlet where the initial Cognitive & Technical assessment is a major elimination round. Success requires a broad skillset covering logic, verbal, pseudocode, and fundamental IT concepts. The Pseudocode section is a known hurdle requiring dedicated practice.",
          },
          wipro: {
            name: "Wipro",
            assessmentName: "Elite National Talent Hunt (NLTH)",
            totalDuration: 128,
            negativeMarking: "No",
            sections: [
              {
                name: "Aptitude (Quant, Logical, Verbal)",
                questions: 48,
                duration: 48,
              },
              { name: "Written Communication", questions: 1, duration: 20 },
              { name: "Online Programming", questions: 2, duration: 60 },
            ],
            strategy:
              "The test is adaptive, meaning question difficulty changes based on your performance. Accuracy is paramount. The shared 48-minute timer for the three aptitude sections offers flexibility but requires disciplined time allocation. Tackle your strongest section first to save time.",
          },
          capgemini: {
            name: "Capgemini",
            assessmentName: "Exceller Assessment",
            totalDuration: "~175",
            negativeMarking: "No",
            sections: [
              { name: "Technical Test", questions: 40, duration: 40 },
              { name: "Essay Writing", questions: 1, duration: 30 },
              { name: "Game-Based Aptitude", questions: 4, duration: 30 },
              { name: "Spoken English", questions: 30, duration: 30 },
              { name: "Coding", questions: 2, duration: 45 },
            ],
            strategy:
              "A highly innovative process that replaces traditional quant/logical sections with game-based aptitude. Preparation must focus on cognitive skills (logic puzzles, memory games) rather than math problems. Strong CS fundamentals are non-negotiable for the Technical Test.",
          },
          infosys: {
            name: "Infosys",
            assessmentName: "Online Test",
            totalDuration: 120,
            negativeMarking: "No",
            sections: [
              { name: "Reasoning Ability", questions: 15, duration: 25 },
              {
                name: "Technical (Quant) Ability",
                questions: 10,
                duration: 35,
              },
              { name: "Verbal Ability", questions: 20, duration: 20 },
              { name: "Pseudocode", questions: 5, duration: 10 },
              { name: "Numerical Puzzle", questions: 4, duration: 10 },
            ],
            strategy:
              "A comprehensive test with strict sectional timers. The Reasoning section is often the most challenging. The Pseudocode and Numerical Puzzle sections are fast-paced and test quick logical thinking over memorized formulas. Time management is critical.",
          },
        },
        arsenal: {
          quantitative: {
            title: "Quantitative Ability",
            icon: "üìä",
            topics: [
              {
                name: "Time and Work",
                tricks: [
                  {
                    variation: "Basic 'A and B' Problems",
                    technique:
                      "Use the LCM Method. Assume Total Work = LCM of days. This avoids fractions and speeds up calculation. Eg: A=10d, B=15d. Work=LCM(10,15)=30 units. A's rate=3, B's rate=2. Together=30/5=6 days.",
                  },
                  {
                    variation: "Efficiency Comparison",
                    technique:
                      "Ratio of Efficiency is the inverse of the Ratio of Time. If A is twice as efficient as B (E_A:E_B = 2:1), then the time they take is in the ratio T_A:T_B = 1:2.",
                  },
                  {
                    variation: "Men-Days-Hours Formula",
                    technique:
                      "Use the universal formula M1*D1*H1/W1 = M2*D2*H2/W2. If work (W) is constant, it simplifies to M1*D1*H1 = M2*D2*H2.",
                  },
                  {
                    variation: "Pipes and Cisterns",
                    technique:
                      "Treat it as a Time & Work problem with negative efficiency. Inlet pipes have positive work rate, while outlet/leak pipes have a negative work rate. The LCM method works perfectly.",
                  },
                  {
                    variation: "Alternate Days",
                    technique:
                      "Use the Cycle Method. Calculate the work done in one cycle (e.g., 2 days for A and B working alternately). Divide total work by cycle work to find the number of cycles, then calculate the total days.",
                  },
                ],
              },
              {
                name: "Percentages, Profit & Loss",
                tricks: [
                  {
                    variation: "Successive Percentage Change",
                    technique:
                      "Use the formula A + B + (AB/100). Use a positive sign for increase and a negative sign for decrease. Eg: +20% then -10% => 20 - 10 + (20*-10)/100 = 8% net increase.",
                  },
                  {
                    variation: "Dishonest Dealer (False Weight)",
                    technique:
                      "Use the formula: Gain % = [Error / (True Value - Error)] * 100. Eg: Uses 900gm for 1kg. Error=100gm. Gain% = [100 / (1000-100)]*100 = 11.11%.",
                  },
                  {
                    variation: "Two Items Sold at Same SP",
                    technique:
                      "If one is sold at x% profit and the other at x% loss, there is always a net loss. Use the direct formula: Loss % = (x^2 / 100).",
                  },
                  {
                    variation: "CP of x articles = SP of y articles",
                    technique:
                      "Use the formula: Profit % = [(x - y) / y] * 100. If the result is negative, it's a loss.",
                  },
                ],
              },
            ],
          },
          logical: {
            title: "Logical Reasoning",
            icon: "üß†",
            topics: [
              {
                name: "Syllogisms",
                tricks: [
                  {
                    variation: "Standard Problems",
                    technique:
                      "The Venn Diagram method is the most reliable. Represent each statement as a relationship between circles (inside, overlapping, or separate). A conclusion is only true if it holds for ALL possible diagrams.",
                  },
                  {
                    variation: "'Possibility' and 'Either/Or' Cases",
                    technique:
                      "A 'possibility' conclusion is true if you can draw at least one valid diagram that supports it. An 'Either/Or' case applies for two individually false conclusions that are complementary (e.g., 'Some A are B' and 'No A are B').",
                  },
                ],
              },
              {
                name: "Seating Arrangements",
                tricks: [
                  {
                    variation: "Linear Arrangements",
                    technique:
                      "Start with definite information (e.g., 'A is at an extreme end'). Draw dashes for seats and fill them in. Use relative clues ('B is second to the right of A') to complete the arrangement.",
                  },
                  {
                    variation: "Circular Arrangements",
                    technique:
                      "Fix one person's position to create a reference point. Remember: when facing the center, 'left' is clockwise and 'right' is anti-clockwise. The opposite is true if facing outwards.",
                  },
                  {
                    variation: "Matrix Puzzles",
                    technique:
                      "Use a table/matrix. List people in rows and parameters (company, city, etc.) in columns. Use ticks (‚úì) for positive matches and crosses (‚úó) for negative ones. Use elimination to solve.",
                  },
                ],
              },
              {
                name: "Blood Relations",
                tricks: [
                  {
                    variation: "Pointing/Introducing Statements",
                    technique:
                      "Work backwards from the pronoun 'my'. Start with yourself and trace the relationship step-by-step. Eg: 'son of the only son of my mother' -> my son.",
                  },
                  {
                    variation: "Coded Relations (A+B, A*B)",
                    technique:
                      "Draw a family tree using symbols (+ for male, - for female, | for parent-child, = for couple). Do not solve it mentally. The diagram makes the relationships clear.",
                  },
                ],
              },
            ],
          },
          verbal: {
            title: "Verbal Ability",
            icon: "üó£Ô∏è",
            topics: [
              {
                name: "Error Spotting / Sentence Correction",
                tricks: [
                  {
                    variation: "Finding the Error",
                    technique:
                      "Use the 'SCAN' method. Systematically check for: S-Subject-Verb Agreement, C-Comparisons & Conjunctions, A-Articles & Pronouns, N-No Parallelism & Modifier Placement. This is more reliable than what 'sounds right'.",
                  },
                ],
              },
              {
                name: "Para Jumbles",
                tricks: [
                  {
                    variation: "Arranging Sentences",
                    technique:
                      "First, find the opening sentence (a general, introductory statement). Then, look for mandatory pairs (e.g., noun-pronoun link, cause-effect). Finally, identify the closing sentence. This eliminates options quickly.",
                  },
                ],
              },
              {
                name: "Reading Comprehension",
                tricks: [
                  {
                    variation: "Answering Questions",
                    technique:
                      "Use the Question-First, Skim-Second approach. Read the questions first (not options) to know what to look for. Then, skim the passage to locate the answers. This makes reading an active search.",
                  },
                ],
              },
            ],
          },
        },
        special: [
          {
            name: "The Pseudocode Challenge (Accenture & Infosys)",
            icon: "üíª",
            content:
              "Pseudocode tests raw programming logic. The most effective way to solve these is with the 'Trace Table' technique. Create a table on your rough pad with a column for each variable. Go through the code line-by-line, updating the variable values in your table as they change. This manual simulation prevents mental errors, especially with loops and recursion.",
          },
          {
            name: "Winning the Capgemini Games",
            icon: "üéÆ",
            content:
              "This is a test of cognitive abilities, not gaming skills. The key is to understand the objective of each game. For example, the Motion Challenge tests strategic planning, so you should plan your moves before acting. The Grid Challenge tests working memory and multitasking. Practice with brain teasers, logic puzzles, and memory games to hone these underlying skills.",
          },
          {
            name: "Acing Communication Rounds (Accenture & Wipro)",
            icon: "üé§",
            content:
              "These are AI-proctored tests evaluating fluency, pronunciation, and clarity. The best preparation is to practice with a recorder. Record yourself reading articles or summarizing them, then listen back to find filler words ('um', 'ah') and pronunciation errors. During the test, use a good headset in a quiet room and speak slowly and clearly. Clarity is more important than speed.",
          },
        ],
        plan: {
          default: [
            {
              week: "Week 1: Foundation Building & Diagnostic",
              details:
                "Solidify concepts in core Quant and Logical Reasoning topics. Focus on understanding the fundamental methods (LCM, Venn diagrams). Take one full-length mock test of your top-priority company to identify your weak areas and establish a baseline score.",
            },
            {
              week: "Week 2: Company-Specific Deep Dive",
              details:
                "Dedicate 1-2 days per target company. For Capgemini, practice game-based assessments. For Accenture/Infosys, focus heavily on Pseudocode. For TCS, practice advanced coding. Take at least one company-specific mock for each of your top 3 target companies.",
            },
            {
              week: "Week 3: Speed Building & Accuracy",
              details:
                "Take topic-wise, timed quizzes for all sections. The goal is to apply the shortcuts and tricks from the 'Aptitude Arsenal' under time pressure. Aim to reduce your average time per question while maintaining over 85% accuracy.",
            },
            {
              week: "Week 4: Full-Length Mocks & Final Revision",
              details:
                "Take at least two full-length mock tests for each target company. The most critical activity is analysis. Spend more time analyzing your mistakes than taking tests. Understand the 'why' behind each error (conceptual gap, calculation error, etc.) and revise that specific topic.",
            },
          ],
        },
      };

      const mainContent = document.getElementById("main-content");
      const navLinks = document.querySelectorAll(".nav-link");
      const modal = document.getElementById("modal");
      const modalTitle = document.getElementById("modal-title");
      const modalBody = document.getElementById("modal-body");
      const modalClose = document.getElementById("modal-close");
      const globalLoader = document.getElementById("global-loader");
      let currentChart = null;

      function showLoader() {
        globalLoader.classList.add("visible");
      }
      function hideLoader() {
        globalLoader.classList.remove("visible");
      }

      async function callGemini(prompt) {
        showLoader();
        let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
        const payload = { contents: chatHistory };
        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        try {
          const response = await fetch(apiUrl, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });
          if (!response.ok) {
            throw new Error(`API call failed with status: ${response.status}`);
          }
          const result = await response.json();
          if (
            result.candidates &&
            result.candidates.length > 0 &&
            result.candidates[0].content &&
            result.candidates[0].content.parts &&
            result.candidates[0].content.parts.length > 0
          ) {
            return result.candidates[0].content.parts[0].text;
          } else {
            return "Sorry, I couldn't generate a response. The API returned an unexpected result.";
          }
        } catch (error) {
          console.error("Gemini API call error:", error);
          return "An error occurred while contacting the AI. Please try again later.";
        } finally {
          hideLoader();
        }
      }

      function clearContent() {
        mainContent.innerHTML = "";
      }

      function renderCompaniesView(activeCompany = "tcs") {
        clearContent();
        const companyData = appData.companies;

        const intro = `
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-white">Company Deep Dive</h2>
                    <p class="mt-2 text-gray-400">Select a company to see a detailed breakdown of its assessment pattern, key strategies, and a visualization of the time allocation per section. Understanding these nuances is the first step to building a targeted preparation strategy.</p>
                </div>
            `;

        const companyButtons = `
                <div class="flex flex-wrap justify-center gap-2 mb-8">
                    ${Object.keys(companyData)
                      .map(
                        (key) => `
                        <button class="company-btn py-2 px-4 rounded-full text-sm font-semibold transition-all duration-300 border-2 border-transparent ${key === activeCompany ? "company-btn-active" : "bg-gray-700 text-gray-300 hover:bg-gray-600"}" data-company="${key}">
                            ${companyData[key].name}
                        </button>
                    `,
                      )
                      .join("")}
                </div>
            `;

        const company = companyData[activeCompany];
        const content = `
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-bold text-blue-400 mb-2">${company.name} - ${company.assessmentName}</h3>
                            <div class="flex items-center text-sm text-gray-400 mb-4">
                                <span class="mr-4"><strong>Total Duration:</strong> ${company.totalDuration} mins</span>
                                <span><strong>Negative Marking:</strong> ${company.negativeMarking}</span>
                            </div>
                            <h4 class="font-semibold mb-2 text-gray-200">Section Breakdown:</h4>
                            <ul class="list-disc list-inside space-y-2 text-gray-400">
                                ${company.sections.map((s) => `<li><strong class="text-gray-300">${s.name}:</strong> ${s.questions > 0 ? `${s.questions}Q` : ""} in ${s.duration} mins</li>`).join("")}
                            </ul>
                            <h4 class="font-semibold mt-4 mb-2 text-gray-200">Key Strategy:</h4>
                            <p class="text-gray-400">${company.strategy}</p>
                             <button data-company-name="${company.name}" class="generate-interview-btn mt-6 inline-flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600">
                                ‚ú® Generate Mock Interview Questions
                            </button>
                        </div>
                        <div class="flex flex-col items-center justify-center">
                            <h4 class="font-semibold mb-2 text-gray-200 text-center">Time Allocation per Section</h4>
                            <div class="chart-container">
                                <canvas id="companyChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            `;

        mainContent.innerHTML = intro + companyButtons + content;
        createCompanyChart(company);
      }

      function createCompanyChart(company) {
        const ctx = document.getElementById("companyChart").getContext("2d");
        if (currentChart) {
          currentChart.destroy();
        }
        currentChart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: company.sections.map((s) => s.name),
            datasets: [
              {
                label: "Duration (mins)",
                data: company.sections.map((s) => s.duration),
                backgroundColor: [
                  "#3B82F6",
                  "#10B981",
                  "#F59E0B",
                  "#EF4444",
                  "#8B5CF6",
                  "#EC4899",
                ],
                borderColor: "#111827",
                borderWidth: 3,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: "bottom",
                labels: {
                  color: "#D1D5DB",
                  font: { size: 10 },
                  boxWidth: 15,
                  padding: 15,
                },
              },
              tooltip: {
                titleColor: "#FFFFFF",
                bodyColor: "#D1D5DB",
                callbacks: {
                  label: function (context) {
                    let label = context.label || "";
                    if (label) {
                      label += ": ";
                    }
                    if (context.parsed !== null) {
                      label += context.parsed + " mins";
                    }
                    return label;
                  },
                },
              },
            },
          },
        });
      }

      function renderArsenalView() {
        clearContent();
        const arsenalData = appData.arsenal;
        const intro = `
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-white">Aptitude Arsenal</h2>
                    <p class="mt-2 text-gray-400 max-w-3xl mx-auto">This is your strategic toolkit for mastering every question type. Each section breaks down high-frequency topics into specific variations and provides proven, time-saving tricks. Click on a skill, then a topic, to reveal the techniques.</p>
                </div>
            `;
        const content = `
                <div class="space-y-4">
                    ${Object.values(arsenalData)
                      .map(
                        (skill) => `
                        <div class="bg-gray-800 rounded-xl shadow-lg">
                            <button class="accordion-btn w-full p-4 text-left font-bold text-lg flex justify-between items-center text-gray-200 hover:bg-gray-700 rounded-xl transition-colors">
                                <span>${skill.icon} ${skill.title}</span>
                                <span class="transform transition-transform duration-300">‚ñº</span>
                            </button>
                            <div class="accordion-content px-4 pb-2">
                                <div class="border-t border-gray-700 pt-4 space-y-3">
                                ${skill.topics
                                  .map(
                                    (topic) => `
                                    <div class="border border-gray-700 rounded-lg">
                                        <button class="accordion-btn w-full p-3 text-left font-semibold flex justify-between items-center text-gray-300 hover:bg-gray-700/50 rounded-lg">
                                            <span>${topic.name}</span>
                                            <span class="transform transition-transform duration-300 text-sm">‚ñº</span>
                                        </button>
                                        <div class="accordion-content p-3 border-t border-gray-700">
                                            <ul class="space-y-3 text-sm text-gray-400">
                                            ${topic.tricks
                                              .map(
                                                (trick) => `
                                                <li>
                                                    <strong class="text-gray-200">${trick.variation}:</strong> ${trick.technique}
                                                </li>
                                            `,
                                              )
                                              .join("")}
                                            </ul>
                                        </div>
                                    </div>
                                `,
                                  )
                                  .join("")}
                                </div>
                            </div>
                        </div>
                    `,
                      )
                      .join("")}
                </div>
            `;
        mainContent.innerHTML = intro + content;
      }

      function renderSpecialView() {
        clearContent();
        const specialData = appData.special;
        const intro = `
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-white">Specialized Skill Development</h2>
                    <p class="mt-2 text-gray-400 max-w-3xl mx-auto">Modern recruitment goes beyond traditional aptitude. This section covers the non-traditional assessments that are increasingly becoming deciding factors. Mastering these skills is crucial for companies like Accenture, Capgemini, and Infosys.</p>
                </div>
            `;
        const content = `
                <div class="grid md:grid-cols-3 gap-6">
                    ${specialData
                      .map(
                        (item) => `
                        <div class="bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-blue-500/10 transition-shadow">
                            <div class="text-3xl mb-3">${item.icon}</div>
                            <h3 class="font-bold text-lg mb-2 text-gray-200">${item.name}</h3>
                            <p class="text-gray-400 text-sm">${item.content}</p>
                        </div>
                    `,
                      )
                      .join("")}
                </div>
            `;
        mainContent.innerHTML = intro + content;
      }

      function renderPlanView(planContent = null) {
        clearContent();
        const planData = planContent ? planContent : appData.plan.default;
        const intro = `
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-white">AI-Powered Study Plan</h2>
                    <p class="mt-2 text-gray-400 max-w-3xl mx-auto">Use the default 4-week plan, or create a personalized schedule. Enter your weak and strong topics, and our AI will generate a custom plan to help you focus your efforts where they matter most.</p>
                </div>
            `;

        const form = `
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg max-w-3xl mx-auto mb-8">
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="weak-topics" class="block text-sm font-medium leading-6 text-gray-300">My Weak Topics</label>
                            <input type="text" id="weak-topics" class="mt-2 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6" placeholder="e.g., Time and Work, Syllogisms">
                        </div>
                        <div>
                            <label for="strong-topics" class="block text-sm font-medium leading-6 text-gray-300">My Strong Topics</label>
                            <input type="text" id="strong-topics" class="mt-2 block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6" placeholder="e.g., Percentages, Reading Comp">
                        </div>
                    </div>
                    <button id="generate-plan-btn" class="w-full inline-flex justify-center items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600">
                        ‚ú® Create My Plan
                    </button>
                </div>
            `;

        const content = `
                <div id="plan-display" class="space-y-3 max-w-3xl mx-auto">
                    ${planData
                      .map(
                        (item) => `
                        <div class="bg-gray-800 rounded-xl shadow-lg">
                            <button class="accordion-btn w-full p-4 text-left font-bold text-lg flex justify-between items-center text-gray-200 hover:bg-gray-700 rounded-xl transition-colors">
                                <span>${item.week}</span>
                                <span class="transform transition-transform duration-300">‚ñº</span>
                            </button>
                            <div class="accordion-content p-4 border-t border-gray-700">
                                <p class="text-gray-400 whitespace-pre-wrap">${item.details}</p>
                            </div>
                        </div>
                    `,
                      )
                      .join("")}
                </div>
            `;
        mainContent.innerHTML = intro + form + content;
      }

      function handleNavigation(e) {
        const target = e.target.closest(".nav-link");
        if (!target) return;

        const view = target.dataset.view;

        navLinks.forEach((link) => {
          link.classList.remove("active-nav");
          link.classList.add("inactive-nav");
        });
        target.classList.add("active-nav");
        target.classList.remove("inactive-nav");

        switch (view) {
          case "companies":
            renderCompaniesView();
            break;
          case "arsenal":
            renderArsenalView();
            break;
          case "special":
            renderSpecialView();
            break;
          case "plan":
            renderPlanView();
            break;
        }
      }

      async function handleMainContentClick(e) {
        const companyBtn = e.target.closest(".company-btn");
        if (companyBtn) {
          renderCompaniesView(companyBtn.dataset.company);
        }

        const accordionBtn = e.target.closest(".accordion-btn");
        if (accordionBtn) {
          accordionBtn.classList.toggle("active");
          const content = accordionBtn.nextElementSibling;
          const arrow = accordionBtn.querySelector("span:last-child");
          if (content.style.maxHeight) {
            content.style.maxHeight = null;
            arrow.style.transform = "rotate(0deg)";
          } else {
            content.style.maxHeight = content.scrollHeight + "px";
            arrow.style.transform = "rotate(180deg)";
          }
        }

        const interviewBtn = e.target.closest(".generate-interview-btn");
        if (interviewBtn) {
          const companyName = interviewBtn.dataset.companyName;
          modalTitle.innerText = `Mock Interview: ${companyName}`;
          modalBody.innerHTML = `<div class="flex justify-center"><div class="loader"></div></div>`;
          modal.classList.add("visible");
          const prompt = `Act as a senior technical recruiter for ${companyName}. Generate a list of 3 relevant technical interview questions and 2 HR interview questions for a typical entry-level software developer or system engineer role at your company. Format the response clearly with headings for 'Technical Questions' and 'HR Questions'.`;
          const response = await callGemini(prompt);
          modalBody.innerHTML = `<div class="text-gray-300 whitespace-pre-wrap">${response}</div>`;
        }

        const planBtn = e.target.closest("#generate-plan-btn");
        if (planBtn) {
          const weakTopics = document.getElementById("weak-topics").value;
          const strongTopics = document.getElementById("strong-topics").value;
          if (!weakTopics) {
            alert("Please enter your weak topics to generate a plan.");
            return;
          }
          const prompt = `
                    Create a personalized 4-week study plan for a student preparing for placements.
                    The student's weak topics are: ${weakTopics}.
                    The student's strong topics are: ${strongTopics}.
                    
                    Structure the plan into 4 weeks. For each week, provide a detailed focus. 
                    The plan should allocate significantly more time and specific practice exercises for the weak topics. 
                    For the strong topics, suggest maintenance-level practice (e.g., one short quiz per week).
                    The output should be a JSON array, where each object has a "week" and a "details" key. For example: [{"week": "Week 1: ...", "details": "..."}].
                    Do not include any text outside of the JSON array.
                `;
          const response = await callGemini(prompt);
          try {
            const parsedPlan = JSON.parse(response);
            renderPlanView(parsedPlan);
          } catch (err) {
            console.error("Failed to parse AI plan:", err);
            alert("The AI generated an invalid plan format. Please try again.");
          }
        }
      }

      document.querySelector("nav").addEventListener("click", handleNavigation);
      mainContent.addEventListener("click", handleMainContentClick);

      modalClose.addEventListener("click", () =>
        modal.classList.remove("visible"),
      );
      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.classList.remove("visible");
        }
      });

      document.querySelector('.nav-link[data-view="companies"]').click();
    </script>
  </body>
</html>
